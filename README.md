# JoinRender-Flow

一个可视化节点编程工具，专为创意艺术工作者设计。支持 ComfyUI 插件系统。

## 为什么做这个？

用过 ComfyUI 的人都知道，它功能强大但上手门槛太高了。光是理解 Latent、VAE、CLIP 这些概念就要花不少时间，更别说那密密麻麻的节点和连线。

我们想做一个更简单的工具——把复杂的 AI 生图流程封装成"积木块"，拖一拖、连一连就能用。

## 核心思路

**三类节点搞定一切：**

1. **输入节点** - 放素材的地方（文字、图片、视频）
2. **LLM 节点** - 大脑，负责理解你的想法并转成机器能懂的指令
3. **媒体节点** - 干活的，生成图片视频

**角色一致性怎么解决？**

这是个老大难问题。我们的方案是：先用「角色参考生成」节点生成一张标准的角色参考图（T-Pose，绿幕背景），然后其他图像生成节点都可以接收这张参考图。节点上带 🔒 标记的输入口就是干这个的。

简单说就是：生成一次角色，到处复用。

## 和 ComfyUI 有啥区别？

| | JoinRender-Flow | ComfyUI |
|---|---|---|
| 上手难度 | 拖拽就能用 | 得先学一堆概念 |
| 节点数量 | 20 来个，够用 | 几百个，看着头大 |
| 适合谁 | 设计师、创作者 | 技术向用户 |
| 角色一致性 | 内置支持 | 得自己配 IP-Adapter |
| 运行环境 | 纯前端，开箱即用 | 要装 Python 环境 |

当然，ComfyUI 的灵活性是我们比不了的。这两个工具定位不同，看你需要什么。

## 功能

### AI 模型接入

支持多种 API 后端：

- **OpenAI** - 用于 LLM 处理、提示词增强、图像分析
- **Replicate** - 用于图像生成（SDXL）、视频生成（SVD）
- **本地模型** - 支持 Ollama，可以跑本地 LLM
- **模拟模式** - 不需要 API，用于测试工作流

在侧边栏底部点「设置」配置你的 API Key。

### 工作流导入导出

- 保存工作流为 JSON 文件
- 从文件加载工作流
- **支持导入 ComfyUI 工作流**（自动转换格式）
- 导出为 ComfyUI 格式

工具栏上的保存按钮有下拉菜单，可以选择导出格式。

### 预设模板

内置 8 个常用模板，点侧边栏底部的「模板」打开：

| 模板 | 说明 |
|------|------|
| 简单图像生成 | 最基础的文生图 |
| 提示词增强 | 用 LLM 把简单描述变成专业提示词 |
| 图生视频 | 把静态图片变成动态视频 |
| 首尾帧插值 | 给定首尾两帧，自动生成中间过渡 |
| 风格迁移 | 把一张图的风格应用到另一张图 |
| 图像变体 | 从一张图生成多个变体 |
| 角色创建器 | 完整的角色一致性流水线 |
| 科幻宇宙生成器 | 从小说片段到多镜头视频 |

### ComfyUI 兼容

- 可以加载 ComfyUI 插件定义
- 支持导入 ComfyUI 工作流文件
- 节点类型自动映射

## 节点列表

**输入：**
- 📝 文本输入
- 🖼️ 图像上传  
- 🎬 视频上传

**LLM：**
- 🧠 LLM 处理 - 把你的描述转成标准提示词
- ✨ 提示词增强
- 👁️ 图像分析
- 📋 JSON 分离器

**媒体生成：**
- 🎯 角色参考生成 - 生成 T-Pose 参考图
- 🖼️ 图像生成
- 🎬 视频生成
- 🎥 首尾帧插值
- 🔄 图像变体
- 🎨 风格迁移
- ✂️ 背景移除
- 🔍 图像放大

**输出：**
- 📤 图像输出
- 🎞️ 视频输出
- 🎬 分镜板输出

## 怎么用？

```bash
# 装依赖
npm install

# 跑起来
npm run dev
```

打开浏览器访问 http://localhost:5173

**基本操作：**
- 左边栏拖节点到画布
- 从右边的输出口拖线到左边的输入口
- 点工具栏的播放按钮运行

**配置 API：**
1. 点侧边栏底部的「设置」
2. 选择 API 提供商
3. 填入你的 API Key
4. 保存

**使用模板：**
1. 点侧边栏底部的「模板」
2. 选一个模板
3. 点「使用此模板」

**导入 ComfyUI 工作流：**
1. 点工具栏的打开按钮（📂）
2. 选择 ComfyUI 导出的 JSON 文件
3. 自动识别并转换

## 技术栈

- React 18
- TypeScript
- Vite
- Zustand（状态管理）

纯前端项目，不需要后端。

## 项目结构

```
src/
├── components/     # UI 组件
├── store/          # 状态管理
├── nodes/          # 节点定义
├── plugins/        # 插件系统
├── services/       # API 服务
├── templates/      # 工作流模板
├── types/          # 类型定义
└── styles/         # 样式
```

## License

Apache-2.0
