# JoinRender-Flow

可视化节点编程工具，面向创意工作者，兼容 ComfyUI 插件系统。

## 项目背景

ComfyUI 功能强大，但学习成本较高。对于设计师和内容创作者来说，理解 Latent、VAE、CLIP 这些底层概念需要不少时间。

JoinRender-Flow 的目标是降低这个门槛——将复杂的 AI 生成流程封装成易用的节点模块，通过拖拽连线的方式构建工作流。

## 设计思路

**节点分类**

将节点简化为四类：
- **输入节点** — 文本、图像、视频的入口
- **LLM 节点** — 负责理解用户意图，将自然语言转换为结构化提示词
- **媒体节点** — 调用生成模型，输出图像或视频
- **输出节点** — 预览和导出结果

**角色一致性**

通过「角色参考」机制解决多镜头角色一致性问题：先生成一张标准参考图（T-Pose），后续生成节点通过专用输入端口（🔒 标记）引用该图像，确保角色外观统一。

## 主要功能

**API 集成**
- OpenAI — LLM 处理、图像分析
- Replicate — 图像生成（SDXL）、视频生成（SVD）
- Ollama — 本地模型支持
- 模拟模式 — 无需 API，用于工作流测试

**工作流管理**
- 保存和加载工作流
- 导入 ComfyUI 工作流（自动格式转换）
- 导出为 ComfyUI 格式

**预设模板**
- 文本生成图像
- 图像生成视频
- 提示词增强
- 风格迁移
- 图像变体
- 首尾帧插值
- 角色一致性流水线

## 节点列表

| 类别 | 节点 |
|------|------|
| 输入 | 文本输入、图像上传、视频上传 |
| LLM | LLM 处理、提示词增强、图像分析、JSON 分离器 |
| 媒体 | 角色参考生成、图像生成、视频生成、首尾帧插值、图像变体、风格迁移、背景移除、图像放大 |
| 输出 | 图像输出、视频输出、分镜板输出 |

## 快速开始

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

访问 http://localhost:5173

**基本操作**
1. 从左侧面板拖拽节点到画布
2. 连接节点（从输出端口拖向输入端口）
3. 点击工具栏运行按钮执行工作流

**API 配置**

点击侧边栏底部「设置」按钮，选择 API 提供商并填入密钥。

## 技术栈

- React 18
- TypeScript
- Vite
- Zustand

纯前端项目，无需后端服务。

## 项目结构

```
src/
├── components/   # UI 组件
├── store/        # 状态管理
├── nodes/        # 节点定义
├── plugins/      # 插件系统
├── services/     # API 服务
├── templates/    # 工作流模板
├── types/        # 类型定义
└── styles/       # 样式文件
```

## 与 ComfyUI 的区别

| | JoinRender-Flow | ComfyUI |
|---|---|---|
| 定位 | 面向创意工作者 | 面向技术用户 |
| 学习曲线 | 较低 | 较高 |
| 节点数量 | 精简（约 20 个） | 丰富（数百个） |
| 角色一致性 | 内置支持 | 需手动配置 |
| 运行环境 | 浏览器 | Python |

两者定位不同，ComfyUI 更灵活，JoinRender-Flow 更易用。

## License

Apache-2.0
